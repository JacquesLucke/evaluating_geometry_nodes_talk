<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Evaluating Geometry Nodes</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>Evaluating Geometry Nodes</section>
        <section>
          Who are you?
          <br />
          <button id="settings">Settings</button>
          <button id="who-are-you-poll">Start Poll</button>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>

    <script>
      let server_url = "http://localhost:8080";
      let session_id = localStorage.getItem("session_id") || "1234";

      function change_id(e) {
        session_id = document.getElementById("id-input").value;
        localStorage.setItem("session_id", session_id);
      }

      function update_poll_page(page_str) {
        fetch(`${server_url}/${session_id}/set_page`, {
          method: "POST",
          body: page_str,
        });
      }

      document.getElementById("settings").addEventListener("click", () => {
        Swal.fire({
          html: `<input onchange='change_id()' id='id-input' value='${session_id}'></input>`,
        });
      });

      document
        .getElementById("who-are-you-poll")
        .addEventListener("click", () => {
          update_poll_page("Hello from slides");
        });
    </script>
  </body>
</html>
